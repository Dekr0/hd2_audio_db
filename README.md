## Dev. Environment Setup

1. Install `goose`
2. Install `sqlc`
3. Migration
4. Generate Go code from `sqlc`

### Requirement

- Golang (Version 1.23.2)

### Install `goose`

- Goose is a database migration tool.
- [How to install](https://github.com/pressly/goose?tab=readme-ov-file#install) 

### Install `sqlc` 

- `sqlc` generates type-safe code from SQL. This is not an ORM or query builder.
You still need to write your own SQL query.
- [How to install](https://docs.sqlc.dev/en/latest/overview/install.html) 

### Project Structure

- `sql/schmea` - database migration and database schema SQL scripts.
- `sql/queries` - database query for `sqlc` to generate type-safe Go code to 
query the database
- `csv` - A folder contains a set of .csv files that contain information about 
all different audio source archives.
  - `./csv/archives` - The combine result of the .csv files in this folder 
  resemble the commonly use archives (not all) in [Audio Files List](https://docs.google.com/spreadsheets/d/1VQsOgEskLrAvZg-vAyZNTQs87UvTSTToRvxXNsB-oe8/edit?usp=sharing).
- `internal` - a folder generated by `sqlc`. This folder contains all Go code 
for querying the database.

### Migration

- There's a setup script for Windows and Linux you can source to export the 
necessary environmental variables that are required `goose` to function properly.
    - If you don't want to use this script, you need to manually specify all 
    environmental variables when running `goose`
- To run an Up migration, run `goose up` to generate all tables. It will 
generate a brand new database if the currently directory does not have one.
- For Down migration, you need to run `goose down` multiple times if you 
want to revert the database back to plain state since migrations are divided 
into each individual incremental step.

### Generate Go code from `sqlc`

- This needs to be run after Up migration since `sqlc` needs to know the schema of 
all tables, and requires tables to exist in the database.
